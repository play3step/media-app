<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media App</title>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../styles/record.css">
</head>

<body>
    <div id="wrap">
        <div id="background_img">
            <div id="record_cover">
                <div id="tone_arm"></div>
            </div>
<<<<<<< HEAD
            <div id="play_list" class="list_container">
                <div id="list_item"></div>
            </div>
=======
            <div id ="albume_info">
                <img id ="current_img">
            </div>  
>>>>>>> aa3f1e6f14f4f2ab1d8a32afca5c2637a6ae4fa6
            <div id="controller_box">
                <div id="music_controller">
                    <button id="btn_prev">
                        <img src="../png/skip_previous.png">
                    </button>
                    <button id="btn_play">
                        <img src="../png/play_arrow.png">
                    </button>
                    <button id="btn_next">
                        <img src="../png/skip_next.png">
                    </button>
                </div>
            </div>
        </div>
    </div>

</body>
<script type="module">
    // 재생 목록 데이터
    import { musicData } from "../data/data.js"
    console.log(musicData)

    // 현재 재생중인 오디오
    let image = musicData[0].image
    let title = musicData[0].title
    let author = musicData[0].author
    let audio = new Audio(musicData[0].audio);
    let toggleAlbume = false;
    let toggleTonearm = false;

    $('.list_container').css("background-image", `url(${image})`);
    let listDiv = $("#play_list")
    for (let i = 0; i < 3; i++) {
        let title = musicData[i].title

        let list_item = $('<div class = "list_item">');
        list_item.append('<span class = "title">' + title + '</span>');
        listDiv.append(list_item)
    }

    $(document).ready(function () {
        $("#tone_arm").click(function () {
            if (!toggleTonearm) {
                $(this).css({ 'transform': 'rotateZ(45deg)' });
                event.stopPropagation();
                toggleTonearm = true;
            }
            else {
                $(this).css({ 'transform': 'rotateZ(0deg)' });
                event.stopPropagation();
                toggleTonearm = false;
            }
        });
        $('#record_cover').click(function () {
            $(this).css({ 'transform': 'rotateX(180deg)' })
        })
        $(".list_container").click(function (event) {
            event.stopPropagation();
            if (!toggleAlbume) {
                $(this).animate({
                    rotate: "5deg"
                }, 500).animate({
                    'left': '1640px'
                });
                toggleAlbume = true;
            } else {
                $(this).animate({
                    'left': '1440px'
                }, 500).animate({
                    rotate: "-5deg"
                });
                toggleAlbume = false;
            }

        });

        let currentAudio;
        $('.title').hover(
            function (event) {
                event.stopPropagation();
                $(this).css('color', 'red');
                let title = $(this).text();
                let newAudio;
                for (let i = 0; i < musicData.length; i++) {
                    if (musicData[i].title === title) {
                        newAudio = new Audio(musicData[i].audio);
                        break;
                    }
                }
                if (newAudio) {
                    if (currentAudio) {
                        currentAudio.pause();
                    }
                    newAudio.play();
                    currentAudio = newAudio;
                }
            },
            function () {
                $(this).css('color', 'black');
            }
        );
    });


</script>

</html>